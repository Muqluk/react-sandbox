import React from 'react';
import styled, { keyframes } from 'styled-components';
import PropTypes from 'prop-types';

// this is a style hack for svg in IE to take the full width and height
const StyledSvgWrapper = styled.div`
  position: relative;
  height: 0;
  width: 100%;
  padding: 0;
  padding-bottom: ${(props) => (props.isSmallChart ? '150px' : '500px')};
  svg {
    margin: auto;
    position: absolute;
    height: ${(props) => (props.isSmallChart ? '100%' : '65%')};
    width: 65%;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
  }

  @media only screen and (min-width: @tabletBreakpoint) {
    padding-bottom: ${(props) => (props.isSmallChart ? '8vw' : '500px')};
  }
  @media only screen and (min-width: @widescreenMonitorBreakpoint) {
    padding-bottom: ${(props) => (props.isSmallChart ? '150px' : '500px')};
  }
`;

// #bbcad4 = neutralGrey3.  A variable didn't work in the keyframes definition.
const fillAnimation = keyframes`20% { fill: #bbcad4; }`;

const ChartsImageStyle = styled.svg`
      path.icon{animation: ${fillAnimation} 5s infinite; animation-direction: normal;}
      path#bar{animation - delay:0s;}
      path#table{animation - delay:1s;}
      path#area{animation - delay:2s;}
      path#hbar{animation - delay:3s;}
      path#pie{animation - delay:5s;}
      path#line{animation - delay:8s;}
`;

const chartsSvg = (
  <ChartsImageStyle
    data-spec='uncached-chart'
    viewBox='0 0 292 178'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      className='icon'
      id='bar'
      d='M60 32.2234C60 47.6874 47.464 60.2234 32 60.2234C16.536 60.2234 4 47.6874 4 32.2234C4 16.7594 16.536 4.22339 32 4.22339C47.464 4.22339 60 16.7594 60 32.2234Z'
      fill='#7D28FC'
    />
    <path
      d='M46.6875 43.1609H19.8125V18.7859C19.8125 18.614 19.6719 18.4734 19.5 18.4734H17.3125C17.1406 18.4734 17 18.614 17 18.7859V45.6609C17 45.8328 17.1406 45.9734 17.3125 45.9734H46.6875C46.8594 45.9734 47 45.8328 47 45.6609V43.4734C47 43.3015 46.8594 43.1609 46.6875 43.1609ZM23.25 40.0359H25.4375C25.6094 40.0359 25.75 39.8953 25.75 39.7234V34.0984C25.75 33.9265 25.6094 33.7859 25.4375 33.7859H23.25C23.0781 33.7859 22.9375 33.9265 22.9375 34.0984V39.7234C22.9375 39.8953 23.0781 40.0359 23.25 40.0359ZM29.1875 40.0359H31.375C31.5469 40.0359 31.6875 39.8953 31.6875 39.7234V27.2234C31.6875 27.0515 31.5469 26.9109 31.375 26.9109H29.1875C29.0156 26.9109 28.875 27.0515 28.875 27.2234V39.7234C28.875 39.8953 29.0156 40.0359 29.1875 40.0359ZM35.125 40.0359H37.3125C37.4844 40.0359 37.625 39.8953 37.625 39.7234V30.2703C37.625 30.0984 37.4844 29.9578 37.3125 29.9578H35.125C34.9531 29.9578 34.8125 30.0984 34.8125 30.2703V39.7234C34.8125 39.8953 34.9531 40.0359 35.125 40.0359ZM41.0625 40.0359H43.25C43.4219 40.0359 43.5625 39.8953 43.5625 39.7234V24.0984C43.5625 23.9265 43.4219 23.7859 43.25 23.7859H41.0625C40.8906 23.7859 40.75 23.9265 40.75 24.0984V39.7234C40.75 39.8953 40.8906 40.0359 41.0625 40.0359Z'
      fill='white'
    />
    <path
      className='icon'
      id='area'
      d='M287.5 35.7234C287.5 51.1874 274.964 63.7234 259.5 63.7234C244.036 63.7234 231.5 51.1874 231.5 35.7234C231.5 20.2594 244.036 7.72339 259.5 7.72339C274.964 7.72339 287.5 20.2594 287.5 35.7234Z'
      fill='#1073FF'
    />
    <path
      d='M274.188 46.6609H247.312V22.2859C247.312 22.114 247.172 21.9734 247 21.9734H244.812C244.641 21.9734 244.5 22.114 244.5 22.2859V49.1609C244.5 49.3328 244.641 49.4734 244.812 49.4734H274.188C274.359 49.4734 274.5 49.3328 274.5 49.1609V46.9734C274.5 46.8015 274.359 46.6609 274.188 46.6609ZM250.125 44.1609H271.062C271.234 44.1609 271.375 44.0203 271.375 43.8484V26.8171C271.375 26.5359 271.035 26.3992 270.84 26.5945L262.625 34.8093L257.727 29.9656C257.605 29.8445 257.406 29.8445 257.285 29.9656L249.902 37.3718C249.844 37.4304 249.812 37.5085 249.812 37.5906V43.8484C249.812 44.0203 249.953 44.1609 250.125 44.1609Z'
      fill='white'
    />
    <path
      className='icon'
      id='pie'
      d='M174 146.223C174 161.687 161.464 174.223 146 174.223C130.536 174.223 118 161.687 118 146.223C118 130.759 130.536 118.223 146 118.223C161.464 118.223 174 130.759 174 146.223Z'
      fill='#FFA604'
    />

    <path
      d='M159.75 146.458H145.766V132.473C145.766 132.302 145.625 132.161 145.453 132.161H144.438C142.328 132.161 140.281 132.575 138.355 133.387C136.496 134.173 134.824 135.302 133.391 136.735C131.957 138.169 130.828 139.841 130.043 141.7C129.227 143.63 128.812 145.677 128.812 147.786C128.812 149.895 129.227 151.942 130.039 153.868C130.824 155.727 131.953 157.399 133.387 158.833C134.82 160.266 136.492 161.395 138.352 162.18C140.281 162.997 142.328 163.411 144.438 163.411C146.547 163.411 148.594 162.997 150.52 162.184C152.379 161.399 154.051 160.27 155.484 158.837C156.918 157.403 158.047 155.731 158.832 153.872C159.648 151.942 160.062 149.895 160.062 147.786V146.77C160.062 146.598 159.922 146.458 159.75 146.458ZM153.566 156.997C151.121 159.423 147.82 160.77 144.375 160.755C140.934 160.739 137.699 159.391 135.266 156.958C132.816 154.509 131.469 151.251 131.469 147.786C131.469 144.321 132.816 141.063 135.266 138.614C137.398 136.481 140.145 135.18 143.109 134.884V149.114H157.34C157.039 152.094 155.727 154.856 153.566 156.997V156.997ZM163.188 144.286L163.086 143.184C162.754 139.587 161.156 136.192 158.586 133.63C156.016 131.063 152.617 129.469 149.008 129.137L147.902 129.036C147.719 129.02 147.562 129.161 147.562 129.344V144.348C147.562 144.52 147.703 144.661 147.875 144.661L162.875 144.622C163.059 144.622 163.203 144.466 163.188 144.286ZM150.211 142.012V131.989C152.656 132.501 154.926 133.716 156.711 135.497C158.496 137.278 159.719 139.544 160.227 141.985L150.211 142.012Z'
      fill='white'
    />
    <path
      className='icon'
      id='table'
      d='M174 35.7234C174 51.1874 161.464 63.7234 146 63.7234C130.536 63.7234 118 51.1874 118 35.7234C118 20.2594 130.536 7.72339 146 7.72339C161.464 7.72339 174 20.2594 174 35.7234Z'
      fill='#D300A5'
    />
    <path
      d='M162.25 21.9734H129.75C129.059 21.9734 128.5 22.532 128.5 23.2234V48.2234C128.5 48.9148 129.059 49.4734 129.75 49.4734H162.25C162.941 49.4734 163.5 48.9148 163.5 48.2234V23.2234C163.5 22.532 162.941 21.9734 162.25 21.9734ZM160.688 30.0984H152.406V24.7859H160.688V30.0984ZM160.688 38.8484H152.406V32.5984H160.688V38.8484ZM142.094 32.5984H149.906V38.8484H142.094V32.5984ZM149.906 30.0984H142.094V24.7859H149.906V30.0984ZM131.312 32.5984H139.594V38.8484H131.312V32.5984ZM131.312 24.7859H139.594V30.0984H131.312V24.7859ZM131.312 41.3484H139.594V46.6609H131.312V41.3484ZM142.094 41.3484H149.906V46.6609H142.094V41.3484ZM160.688 46.6609H152.406V41.3484H160.688V46.6609Z'
      fill='white'
    />
    <path
      className='icon'
      id='line'
      d='M60 146.223C60 161.687 47.464 174.223 32 174.223C16.536 174.223 4 161.687 4 146.223C4 130.759 16.536 118.223 32 118.223C47.464 118.223 60 130.759 60 146.223Z'
      fill='#00A331'
    />
    <path
      d='M46.6875 157.161H19.8125V132.786C19.8125 132.614 19.6719 132.473 19.5 132.473H17.3125C17.1406 132.473 17 132.614 17 132.786V159.661C17 159.833 17.1406 159.973 17.3125 159.973H46.6875C46.8594 159.973 47 159.833 47 159.661V157.473C47 157.302 46.8594 157.161 46.6875 157.161ZM23.9453 151.134C24.0664 151.255 24.2617 151.255 24.3867 151.134L29.7891 145.759L34.7734 150.774C34.8945 150.895 35.0937 150.895 35.2148 150.774L45.9727 140.02C46.0938 139.899 46.0938 139.7 45.9727 139.579L44.4258 138.032C44.3047 137.911 44.1055 137.911 43.9844 138.032L35 147.012L30.0234 142.005C29.9023 141.884 29.7031 141.884 29.582 142.005L22.4023 149.141C22.2812 149.262 22.2812 149.462 22.4023 149.583L23.9453 151.134Z'
      fill='white'
    />
    <path
      className='icon'
      id='hbar'
      d='M287.5 146.223C287.5 161.687 274.964 174.223 259.5 174.223C244.036 174.223 231.5 161.687 231.5 146.223C231.5 130.759 244.036 118.223 259.5 118.223C274.964 118.223 287.5 130.759 287.5 146.223Z'
      fill='#ED563B'
    />
    <path
      d='M248.563 131.536L248.562 158.411H272.938C273.109 158.411 273.25 158.552 273.25 158.723V160.911C273.25 161.083 273.109 161.223 272.938 161.223H246.062C245.891 161.223 245.75 161.083 245.75 160.911L245.75 131.536C245.75 131.364 245.891 131.223 246.063 131.223L248.25 131.223C248.422 131.223 248.563 131.364 248.563 131.536ZM251.688 154.973L251.688 152.786C251.688 152.614 251.828 152.473 252 152.473H257.625C257.797 152.473 257.938 152.614 257.938 152.786V154.973C257.937 155.145 257.797 155.286 257.625 155.286H252C251.828 155.286 251.687 155.145 251.688 154.973ZM251.688 149.036V146.848C251.688 146.677 251.828 146.536 252 146.536L264.5 146.536C264.672 146.536 264.813 146.677 264.813 146.848L264.812 149.036C264.812 149.208 264.672 149.348 264.5 149.348L252 149.348C251.828 149.348 251.688 149.208 251.688 149.036ZM251.688 143.098V140.911C251.688 140.739 251.828 140.598 252 140.598L261.453 140.598C261.625 140.598 261.766 140.739 261.766 140.911V143.098C261.766 143.27 261.625 143.411 261.453 143.411L252 143.411C251.828 143.411 251.688 143.27 251.688 143.098ZM251.688 137.161V134.973C251.688 134.802 251.828 134.661 252 134.661L267.625 134.661C267.797 134.661 267.938 134.802 267.938 134.973V137.161C267.937 137.333 267.797 137.473 267.625 137.473L252 137.473C251.828 137.473 251.688 137.333 251.688 137.161Z'
      fill='white'
    />
  </ChartsImageStyle>
);

const UncachedChart = ({ isSmallChart }) => (
  <StyledSvgWrapper isSmallChart={isSmallChart}>{chartsSvg}</StyledSvgWrapper>
);

UncachedChart.propTypes = {
  /** True if the panel is a Small Chart */
  isSmallChart: PropTypes.bool,
};

UncachedChart.defaultProps = {
  isSmallChart: false,
};

export default UncachedChart;
